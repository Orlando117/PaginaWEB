--CREACION DE NUESTRA TA BLA
CREATE TABLE DONANTE (
NOMBRE_DON VARCHAR2(15),
NUMERO_DON NUMBER 
);

SELECT * FROM DONANTE;
DELETE FROM DONANTE WHERE NUMERO_DON = 60;
--------------------------------------------------------------------------------
--CREACION DE NUESTRA SECUENCIA PARA QUE SE HAGA DE MANERA AUTOMATICA
  CREATE SEQUENCE donante_sequence
  START WITH 40
  INCREMENT BY 1;
                  
CREATE OR REPLACE TRIGGER tr_donante
BEFORE INSERT ON donante
FOR EACH ROW
BEGIN
    SELECT donante_sequence.nextval
    INTO :new.NUMERO_DON
    FROM dual;
END;

SELECT tr_donante, DONANTE, status
FROM all_triggers;


--------------------------------------------------------------------------------
ALTER TABLE DONANTE
ADD CONSTRAINT PK_NUMDON_DONATE PRIMARY KEY(NUMERO_DON);
--INSETART LOS 30 REGISTROS
INSERT INTO DONANTE VALUES ('donante1',001);
INSERT INTO DONANTE VALUES ('Jose1',002);
INSERT INTO DONANTE VALUES ('Antonio',003);
INSERT INTO DONANTE VALUES ('Orlando',004);
INSERT INTO DONANTE VALUES ('Daniel',005);
INSERT INTO DONANTE VALUES ('Eliam',006);
INSERT INTO DONANTE VALUES ('Wuicho',007);
INSERT INTO DONANTE VALUES ('Isaias',008);
INSERT INTO DONANTE VALUES ('Bickar',009);
INSERT INTO DONANTE VALUES ('Samule',010);
INSERT INTO DONANTE VALUES ('Jacobo',011);
INSERT INTO DONANTE VALUES ('Luis',012);
INSERT INTO DONANTE VALUES ('Anabel',013);
INSERT INTO DONANTE VALUES ('Ana Karen',014);
INSERT INTO DONANTE VALUES ('Yoda',015);
INSERT INTO DONANTE VALUES ('Cubo',016);
INSERT INTO DONANTE VALUES ('Caleb',017);
INSERT INTO DONANTE VALUES ('Fanny',018);
INSERT INTO DONANTE VALUES ('Issac',019);
INSERT INTO DONANTE VALUES ('Mami',020);
INSERT INTO DONANTE VALUES ('Rosa',021);
INSERT INTO DONANTE VALUES ('Chofis',022);
INSERT INTO DONANTE VALUES ('Juanito',023);
INSERT INTO DONANTE VALUES ('Edrey',024);
INSERT INTO DONANTE VALUES ('Timon',025);
INSERT INTO DONANTE VALUES ('Pumba',026);
INSERT INTO DONANTE VALUES ('Simba',027);
INSERT INTO DONANTE VALUES ('Tachala',028);
INSERT INTO DONANTE VALUES ('Igor',029);
INSERT INTO DONANTE VALUES ('Finn',030);


--CREACION DE LA TABLA DE ARTICULOS
CREATE TABLE ARTICULO(
FOLIO_ART NUMBER,
NOMBRE_ART VARCHAR2(15),
NUMERO_DON NUMBER
);

SELECT * FROM ARTICULO;
SELECT * FROM CATEGORIA;

DELETE FROM ARTICULO WHERE FOLIO_ART = 43;

  CREATE SEQUENCE articulo_sequence
  START WITH 40
  INCREMENT BY 1;
                  
CREATE OR REPLACE TRIGGER tr_articulo
BEFORE INSERT ON ARTICULO
FOR EACH ROW
BEGIN
    SELECT articulo_sequence.nextval
    INTO :new.FOLIO_ART
    FROM dual;
END;

--INSERTAR 30 DATOS EN NUESTRA TABLA ARTICULOS
INSERT INTO ARTICULO VALUES (00001,'ARTICULO1',001);
INSERT INTO ARTICULO VALUES (00002,'Cobijas',002);
INSERT INTO ARTICULO VALUES (00003,'Zapatos',003);
INSERT INTO ARTICULO VALUES (00004,'Sudadera',004);
INSERT INTO ARTICULO VALUES (00005,'500 Pesos',005);
INSERT INTO ARTICULO VALUES (00006,'Aceites',006);
INSERT INTO ARTICULO VALUES (00007,'Pq papel',007);
INSERT INTO ARTICULO VALUES (00008,'arroz',008);
INSERT INTO ARTICULO VALUES (00009,'Cobertores',009);
INSERT INTO ARTICULO VALUES (00010,' lentejas',010);
INSERT INTO ARTICULO VALUES (00011,'paracetamol',011);
INSERT INTO ARTICULO VALUES (00012,'Frijoles',012);
INSERT INTO ARTICULO VALUES (00013,'200 Pesos',013);
INSERT INTO ARTICULO VALUES (00014,'Pantalones',014);
INSERT INTO ARTICULO VALUES (00015,'Camisas',015);
INSERT INTO ARTICULO VALUES (00016,'Blusas',016);
INSERT INTO ARTICULO VALUES (00017,'Vestidos',017);
INSERT INTO ARTICULO VALUES (00018,'Diclofenaco',018);
INSERT INTO ARTICULO VALUES (00019,'Zapatos',019);
INSERT INTO ARTICULO VALUES (00020,'Pantalones',020);
INSERT INTO ARTICULO VALUES (00021,'Chamarras',021);
INSERT INTO ARTICULO VALUES (00022,'Jabones',022);
INSERT INTO ARTICULO VALUES (00023,'Sopas',023);
INSERT INTO ARTICULO VALUES (00024,'Atunes',024);
INSERT INTO ARTICULO VALUES (00025,'Leches',025);
INSERT INTO ARTICULO VALUES (00026,'Calcetines',026);
INSERT INTO ARTICULO VALUES (00027,'Mochilas',027);
INSERT INTO ARTICULO VALUES (00028,'Juguetes',028);
INSERT INTO ARTICULO VALUES (00029,'Gorras',029);
INSERT INTO ARTICULO VALUES (00030,'Abrigos',030);


SELECT * FROM ARTICULO;
DESCRIBE ARTICULO;

ALTER TABLE ARTICULO
ADD CONSTRAINT PK_FOLIOART_ARTI PRIMARY KEY(FOLIO_ART);

ALTER TABLE ARTICULO
ADD CONSTRAINT FK_NUMEDON_DONANTE_ARTI FOREIGN KEY(NUMERO_DON)
REFERENCES DONANTE (NUMERO_DON);


ALTER TABLE ARTICULO
DROP CONSTRAINT FK_NUMEDON_DONANTE_ARTI;

ALTER TABLE ARTICULO
ADD CONSTRAINT FK_NUMEDON_DONANTE_ARTI
FOREIGN KEY (NUMERO_DON)
REFERENCES DONANTE(NUMERO_DON)
ON DELETE CASCADE;




--CREACION DE NUESTRA TABLA CATEGORIA

CREATE TABLE CATEGORIA(
FOLIO_ART NUMBER,
DESCRIPCION_CAT VARCHAR2(30),
ESTADO_CAT VARCHAR2(20)
);

--INSERTAR 30 DATOS EN NUESTRA TABLA CATEGORIA
INSERT INTO CATEGORIA VALUES (00001,'DESCRIPCION1SISISI','ESTADO = BIEN');
INSERT INTO CATEGORIA VALUES (00002,'Cobijas','MEDIO');
INSERT INTO CATEGORIA VALUES (00003,'Calzado','BIEN');
INSERT INTO CATEGORIA VALUES (00004,'Ropa','BIEN');
INSERT INTO CATEGORIA VALUES (00005,'Dinero','BIEN');
INSERT INTO CATEGORIA VALUES (00006,'Comida','BIEN');
INSERT INTO CATEGORIA VALUES (00007,'Higiene','BIEN');
INSERT INTO CATEGORIA VALUES (00008,'Comida','BIEN');
INSERT INTO CATEGORIA VALUES (00009,'Cobijas','BIEN');
INSERT INTO CATEGORIA VALUES (00010,'Comida','BIEN');
INSERT INTO CATEGORIA VALUES (00011,'Medicamentos','BIEN');
INSERT INTO CATEGORIA VALUES (00012,'Comida','BIEN');
INSERT INTO CATEGORIA VALUES (00013,'Dinero','BIEN');
INSERT INTO CATEGORIA VALUES (00014,'Ropa','MEDIO');
INSERT INTO CATEGORIA VALUES (00015,'Ropa','BIEN');
INSERT INTO CATEGORIA VALUES (00016,'Ropa','MEDIO');
INSERT INTO CATEGORIA VALUES (00017,'Ropa','BIEN');
INSERT INTO CATEGORIA VALUES (00018,'Medicamentos','BIEN');
INSERT INTO CATEGORIA VALUES (00019,'Calzado','MEDIO');
INSERT INTO CATEGORIA VALUES (00020,'Ropa','BIEN');
INSERT INTO CATEGORIA VALUES (00021,'Ropa','BIEN');
INSERT INTO CATEGORIA VALUES (00022,'Limpieza','BIEN');
INSERT INTO CATEGORIA VALUES (00023,'Comida','BIEN');
INSERT INTO CATEGORIA VALUES (00024,'Comida','BIEN');
INSERT INTO CATEGORIA VALUES (00025,'Comida','BIEN');
INSERT INTO CATEGORIA VALUES (00026,'Ropa','BIEN');
INSERT INTO CATEGORIA VALUES (00027,'Mochila','BIEN');
INSERT INTO CATEGORIA VALUES (00028,'Juguetes','BIEN');
INSERT INTO CATEGORIA VALUES (00029,'Ropa','BIEN');
INSERT INTO CATEGORIA VALUES (00030,'Ropa','BIEN');    


ALTER TABLE CATEGORIA
ADD CONSTRAINT FK_FOLIART_ARTI_CATE FOREIGN KEY(FOLIO_ART)
REFERENCES ARTICULO(FOLIO_ART);

SELECT *FROM CATEGORIA;

DELETE FROM CATEGORIA WHERE FOLIO_ART = 30;



UPDATE ARTICULO
SET NOMBRE_ART = 'Nuevo articulo', NUMERO_DON = 5
WHERE FOLIO_ART = 30;


DELETE FROM CATEGORIA WHERE FOLIO_ART = 40;



--CREACIOJND DE LA TABLA DE INTEGRANTES
CREATE TABLE INTEGRANTE(
ID_INTE NUMBER,
NOMBRE_INTE VARCHAR2(20),
APELLIDOMAT_INTE VARCHAR2(20),
APELLIDOPAT_INTE VARCHAR2(20),
CARGO_INTE VARCHAR2(15)
);

-- INSERTAR DATOS EN NUESTRA TABLA DE INTEGRANTES
INSERT INTO INTEGRANTE VALUES(01, 'NOMBRE1', 'APELLIDO1', 'APELLIDO2', 'CARGO1_NO SEXD');
INSERT INTO INTEGRANTE VALUES(02, 'Fernando', 'Sanchez', 'Perez', 'Sub Director');
INSERT INTO INTEGRANTE VALUES(03, 'Michel', 'Gonzalez', 'Lara', 'Tesoresa');
INSERT INTO INTEGRANTE VALUES(04, 'Jared', 'Rojas', 'Aguilar', 'Ayudante');
INSERT INTO INTEGRANTE VALUES(05, 'Arlette ', 'Lopez', 'Gozalez', 'Ayudante');
INSERT INTO INTEGRANTE VALUES(06, 'Cain', 'Lara', 'Perez', 'Diacono');
INSERT INTO INTEGRANTE VALUES(07, 'Jaime', 'Aguilar', 'Hernandez', 'Diacono');
INSERT INTO INTEGRANTE VALUES(08, 'Isaias', 'Lara', 'Lopez', 'Anciano');
INSERT INTO INTEGRANTE VALUES(09, 'Jose Antonio', 'Octviano', 'Flores', 'Ayudante');
INSERT INTO INTEGRANTE VALUES(010, 'Saulo', 'Lopez', 'Gonzalez', 'Voluntario');
INSERT INTO INTEGRANTE VALUES(011, 'Luis', 'Hernandez', 'Flores', 'Ayudante');
INSERT INTO INTEGRANTE VALUES(012, 'Nattan', 'Lara', 'Segundo', 'Ayudante');
INSERT INTO INTEGRANTE VALUES(013, 'Jabier', 'Balmes', 'Mota', 'Ayudante');
INSERT INTO INTEGRANTE VALUES(014, 'Jose Antonio', 'Octviano', 'Flores', 'Ayudante');
INSERT INTO INTEGRANTE VALUES(015, 'Karen', 'Martinez', 'Escobar', 'Voluntaria');
INSERT INTO INTEGRANTE VALUES(016, 'Mario', 'Mudo', 'Lorenzo', 'Voluntario');
INSERT INTO INTEGRANTE VALUES(017, 'Juanito', 'Alcachofa', 'Perez', 'Ayudante');
INSERT INTO INTEGRANTE VALUES(018, 'Fierro', 'Golpeador', 'De Felicida', 'Voluntario');
INSERT INTO INTEGRANTE VALUES(019, 'Oscar', 'Culebro', 'Sanchez', 'Pastor');
INSERT INTO INTEGRANTE VALUES(020, 'Victor', 'Pacheco', 'Pere', 'Voluntario');
INSERT INTO INTEGRANTE VALUES(021, 'Sabas', 'Gonzalez', 'Trecero', 'Diacono');
INSERT INTO INTEGRANTE VALUES(022, 'Karen', 'Modesto', 'Aguilar', 'Voluntaria');
INSERT INTO INTEGRANTE VALUES(023, 'Ernesto', 'Juaquin', 'Uno', 'Voluntario');
INSERT INTO INTEGRANTE VALUES(024, 'Felipe', 'Segundo', 'Perez', 'Voluntario');
INSERT INTO INTEGRANTE VALUES(025, 'Orlando', 'Silbiano', 'Quinto', 'Voluntario');
INSERT INTO INTEGRANTE VALUES(026, 'Pancho', 'Nicolas', 'Pepe', 'Voluntario');
INSERT INTO INTEGRANTE VALUES(027, 'Juan', 'Perez', 'Barbara', 'Ayudante');
INSERT INTO INTEGRANTE VALUES(028, 'Nicole', 'Hernandez', 'Hernandez', 'Voluntaria');
INSERT INTO INTEGRANTE VALUES(029, 'Jorege Ivan', 'Sanchez', 'Mondragon', 'Ayudante');
INSERT INTO INTEGRANTE VALUES(030, 'Brilla Brilla', 'Patricio', 'Estrella', 'Ayudante');

ALTER TABLE INTEGRANTE
ADD CONSTRAINT PK_IDINTE_INTEGRA PRIMARY KEY(ID_INTE);



--CREACION DE NUESTRA TABLA DE DONACION
CREATE TABLE DONACION(
FOLIO_ART NUMBER,
NUMERO_DON NUMBER,
FECHA DATE,
CANTIDAD_DON NUMBER,
ID_INTE NUMBER
);
--INSERCION DENUESTRA TABLA DE DONACIONES
INSERT INTO DONACION VALUES(00001, 001, DATE '2023-10-15',10);
INSERT INTO DONACION VALUES(00002, 002, DATE '2023-09-17',12);
INSERT INTO DONACION VALUES(00003, 003, DATE '2023-09-06',9);
INSERT INTO DONACION VALUES(00004, 004, DATE '2023-08-19',3);
INSERT INTO DONACION VALUES(00005, 005, DATE '2023-08-10',6);
INSERT INTO DONACION VALUES(00006, 006, DATE '2023-08-04',19);
INSERT INTO DONACION VALUES(00007, 007, DATE '2023-07-29',13);
INSERT INTO DONACION VALUES(00008, 008, DATE '2023-07-24',5);
INSERT INTO DONACION VALUES(00009, 009, DATE '2023-07-15',23);
INSERT INTO DONACION VALUES(00010, 010, DATE '2023-07-12',12);
INSERT INTO DONACION VALUES(00011, 011, DATE '2023-07-05',30);
INSERT INTO DONACION VALUES(00012, 012, DATE '2023-06-26',10);
INSERT INTO DONACION VALUES(00013, 013, DATE '2023-06-23',14);
INSERT INTO DONACION VALUES(00014, 014, DATE '2023-06-17',15);
INSERT INTO DONACION VALUES(00015, 015, DATE '2023-06-10',17);
INSERT INTO DONACION VALUES(00016, 016, DATE '2023-06-01',31);
INSERT INTO DONACION VALUES(00017, 017, DATE '2023-05-26',21);
INSERT INTO DONACION VALUES(00018, 018, DATE '2023-05-16',24);
INSERT INTO DONACION VALUES(00019, 019, DATE '2023-05-06',3);
INSERT INTO DONACION VALUES(00020, 020, DATE '2023-05-01',14);
INSERT INTO DONACION VALUES(00021, 021, DATE '2023-04-30',7);
INSERT INTO DONACION VALUES(00022, 022, DATE '2023-04-25',16);
INSERT INTO DONACION VALUES(00023, 023, DATE '2023-04-20',30);
INSERT INTO DONACION VALUES(00024, 024, DATE '2023-04-15',12);
INSERT INTO DONACION VALUES(00025, 025, DATE '2023-04-10',27);
INSERT INTO DONACION VALUES(00026, 026, DATE '2023-03-23',29);
INSERT INTO DONACION VALUES(00027, 027, DATE '2023-03-08',15);
INSERT INTO DONACION VALUES(00028, 028, DATE '2023-03-03',11);
INSERT INTO DONACION VALUES(00029, 029, DATE '2023-02-12',12);
INSERT INTO DONACION VALUES(00030, 030, DATE '2023-02-09',10);



ALTER TABLE DONACION
ADD CONSTRAINT FK_FOLIART_ARTI_DONAC FOREIGN KEY(FOLIO_ART)
REFERENCES ARTICULO(FOLIO_ART);

ALTER TABLE DONACION
ADD CONSTRAINT FK_NUMERDON_DONADOR_DONACIO FOREIGN KEY(NUMERO_DON)
REFERENCES DONANTE(NUMERO_DON);

ALTER TABLE DONACION
ADD CONSTRAINT FK_IDINTE_INTEGR_DONACION FOREIGN KEY(ID_INTE)
REFERENCES INTEGRANTE(ID_INTE);

ALTER TABLE DONACION
DROP CONSTRAINT FK_FOLIART_ARTI_DONAC;

ALTER TABLE DONACION
ADD CONSTRAINT FK_FOLIART_ARTI_DONAC
FOREIGN KEY (FOLIO_ART)
REFERENCES ARTICULO(FOLIO_ART)
ON DELETE CASCADE;



CREATE TABLE USUARIOS(
ID_USUARIO INT PRIMARY KEY NOT NULL,
CORREO VARCHAR2(255),
CONTRASENA VARCHAR2(50),
TELEFONO VARCHAR2(15),
NOMBRE VARCHAR2(100),
ESTATUS INT
);

CREATE SEQUENCE ID_USUARIO
START WITH 10
INCREMENT BY 1;

CREATE OR REPLACE TRIGGER TR_USUARIO
BEFORE INSERT ON USUARIOS
FOR EACH ROW
BEGIN
    SELECT ID_USUARIO.nextval
    INTO :new.ID_USUARIO
    FROM dual;
END;

ALTER TRIGGER SYSTEM.TR_DONANTE ENABLE;


INSERT INTO USUARIOS (CORREO, CONTRASEÑA, TELEFONO, NOMBRE, ESTATUS)
VALUES('JOSE@123', '12354', 3121, 'JOSE', 0);
SELECT * FROM  USUARIOS  WHERE CORREO = 'JOSE@123' AND CONTRASENA = '12354';





SELECT trigger_name, table_name, status
FROM all_triggers;















